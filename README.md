# BaCon
Codes, data and other artifacts of BaCon. For VLDB26 reviewers only.

## Reproduction 
Check `src/run.sh` for the run commands of each experiment.

Some enviroment-dependant setups:
+ see `requirements.txt` for requirements of several basic python packages
+ see `db_connection_conf.json` for the db connection configure used by `psycopg2`, where we assume that the databases for evaluation should be set already (e.g., `imdb`, `dsb-sf2`, `stats` in our experiments).
+ see `src/find_bucket_ext/find_bucket_*/Makefile`, where we need to speficy the correct path for `pg_config`
+ the three extensions `find_bucket_int`, `find_bucket_float`, `find_bucket_ts` are required for our experiments. To set it up, go to one of the folder (e.g., `src/find_bucket_ext/find_bucket_int/`), then run:
  ```bash
  sudo make uninstall
  make clean
  make
  sudo make install
  ```

## Naming
`tree_batch_cext` denotes BaCon in the paper.

Other algorithms are named clearly.

## Repository Structure
`figures/` contains the figures used in the paper. And the script for plotting is `src/plot.py`.

`input_configs/` include all the json configs for running the experiments. Use them according to the usage in `src/run.sh`.

`models/` contains the only model we train for Hybrid, merely in order to validate the robustness of BaCon.

`results/` contains the results, a `correctness_checker.py` (see the code for detailed usage). `.ans` files contain the counts. `.print` files contain the log. `.tsv` files are aggregated results from all three approaches generated by script `src/result_aggregator.py`.

`src/` contains all the codes. The main entry points are `sequential_processing.py`, `postfilter.py`, `tree_batch_cext.py`.

`training_data/` contains all the features and labels for all workloads, even though we only use `job_light_join.sql` and `stats_ceb_join.sql` (see `src/train.py` and `input_configs/train.json` for details)

`workload/` contains all the workloads evaluated in plain sql files. Some special handles for `dsb` workload are in `workload/raw/`.

`*_fk_pk_def.json` are the common FK-PK constraints in an easy-to-understand format.

`fullversion.pdf` is the full version of the paper.
